<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½é—®ç­” - åŒ—äº¬ç•œç‰§å…½åŒ»ç ”ç©¶æ‰€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * { font-family: 'Inter', 'Noto Sans SC', sans-serif; }
        
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .animate-flicker { animation: flicker 1.5s ease-in-out infinite; }
        .animate-slide-in { animation: slideInRight 0.5s ease-out; }
        .animate-typewriter {
            overflow: hidden;
            white-space: nowrap;
            animation: typewriter 2s steps(30) forwards;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .chat-bubble {
            position: relative;
            max-width: 80%;
        }
        
        .chat-bubble.user {
            background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%);
            color: white;
        }
        
        .chat-bubble.assistant {
            background: #f1f5f9;
            color: #1e293b;
        }
        
        .agent-active {
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5), 0 0 20px rgba(59, 130, 246, 0.2);
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen overflow-hidden">
    
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="glass fixed top-0 left-0 right-0 z-50 h-14 border-b border-slate-200">
        <div class="h-full flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
                <a href="index.html" class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center">
                        <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
                    </div>
                    <span class="font-semibold text-slate-700">åŒ—äº¬ç•œç‰§å…½åŒ»ç ”ç©¶æ‰€</span>
                </a>
                <span class="text-slate-300">/</span>
                <span class="text-sm text-slate-600">æ™ºèƒ½é—®ç­”</span>
            </div>
            
            <div class="flex items-center gap-2">
                <button id="proactiveToggle" class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 text-blue-600 text-sm hover:bg-blue-100 transition border border-blue-200">
                    <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                    <span>è‡ªåŠ¨æ¢ç´¢æ¨¡å¼</span>
                </button>
                <button class="p-2 rounded-lg hover:bg-slate-100 transition">
                    <i data-lucide="settings" class="w-5 h-5 text-slate-400"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- ä¸»ä½“å¸ƒå±€ -->
    <div class="flex h-screen pt-14">
        
        <!-- å·¦ä¾§ï¼šèŠå¤©åŒºåŸŸ -->
        <div class="flex-1 flex flex-col min-w-0 bg-white">
            
            <!-- èŠå¤©æ¶ˆæ¯åŒº -->
            <div id="chatContainer" class="flex-1 overflow-y-auto p-4 space-y-4">
                
                <!-- æ¬¢è¿æ¶ˆæ¯ -->
                <div class="flex gap-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center flex-shrink-0 shadow-lg">
                        <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
                    </div>
                    <div class="chat-bubble assistant rounded-2xl rounded-bl-sm px-4 py-3">
                        <p class="text-sm font-medium">ä½ å¥½ï¼æˆ‘æ˜¯åŒ—äº¬ç•œç‰§å…½åŒ»ç ”ç©¶æ‰€æ™ºèƒ½åŠ©æ‰‹ï¼Œä½ çš„ç–«ç—…ç›‘æµ‹åŠ©æ‰‹ã€‚</p>
                        <p class="text-sm text-slate-600 mt-2">æˆ‘å¯ä»¥å¸®ä½ ï¼š</p>
                        <ul class="text-sm text-slate-600 mt-2 space-y-1 list-disc list-inside">
                            <li>æŸ¥è¯¢å®æ—¶ç–«ç—…ç›‘æµ‹æ•°æ®</li>
                            <li>è·å–å…¨çƒäººå…½å…±æ‚£ç—…æœ€æ–°èµ„è®¯</li>
                            <li>ç”Ÿæˆè¡Œä¸šç ”æŠ¥ä¸å†³ç­–å»ºè®®</li>
                            <li>åˆ†æç›‘æµ‹ç‚¹é£é™©é¢„è­¦</li>
                        </ul>
                        <p class="text-sm text-slate-500 mt-3 bg-blue-50 p-2 rounded-lg">
                            ğŸ’¡ å¼€å¯ã€Œè‡ªåŠ¨æ¢ç´¢æ¨¡å¼ã€åï¼Œæˆ‘ä¼šä¸»åŠ¨æ¨é€è¡Œä¸šçƒ­ç‚¹å’Œç›‘æµ‹é¢„è­¦
                        </p>
                    </div>
                </div>

                <!-- ç”¨æˆ·æ¶ˆæ¯ç¤ºä¾‹ -->
                <div class="flex gap-3 justify-end">
                    <div class="chat-bubble user rounded-2xl rounded-br-sm px-4 py-3 max-w-lg">
                        <p class="text-sm">å¸®æˆ‘æŸ¥è¯¢å…»æ®–åœºAçš„æœ€æ–°ç›‘æµ‹æ•°æ®</p>
                    </div>
                </div>

                <!-- AI å›å¤ç¤ºä¾‹ -->
                <div class="flex gap-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
                    </div>
                    <div class="chat-bubble assistant rounded-2xl rounded-bl-sm px-4 py-3 max-w-2xl">
                        <p class="text-sm">æ­£åœ¨ä¸ºæ‚¨æŸ¥è¯¢å…»æ®–åœºAç›‘æµ‹æ•°æ®...</p>
                        
                        <div class="bg-white rounded-lg p-3 mt-3 border border-slate-200">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xs text-slate-500">å…»æ®–åœºA-çŒªèˆç›‘æµ‹ç‚¹</span>
                                <span class="text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded">æ­£å¸¸</span>
                            </div>
                            <div class="grid grid-cols-3 gap-3 text-sm">
                                <div class="text-center p-2 bg-slate-50 rounded">
                                    <p class="text-slate-400 text-xs">å¸ƒé²æ°èŒ</p>
                                    <p class="font-semibold text-green-600">é˜´æ€§</p>
                                </div>
                                <div class="text-center p-2 bg-slate-50 rounded">
                                    <p class="text-slate-400 text-xs">ä½“æ¸©</p>
                                    <p class="font-semibold">36.5Â°C</p>
                                </div>
                                <div class="text-center p-2 bg-slate-50 rounded">
                                    <p class="text-slate-400 text-xs">æ›´æ–°æ—¶é—´</p>
                                    <p class="font-semibold">2åˆ†é’Ÿå‰</p>
                                </div>
                            </div>
                        </div>
                        
                        <p class="text-sm text-slate-600 mt-3">
                            <span class="text-blue-600">@é‡‡æ ·ä¸“å®¶Â·ä¸ä¸€</span> 
                            å®Œæˆé‡‡æ ·åˆ†æï¼Œ
                            <span class="text-cyan-600">@æ£€æµ‹åˆ†æå¸ˆÂ·ä¸äºŒ</span> 
                            ç¡®è®¤æ£€æµ‹ç»“æœæ­£å¸¸ã€‚
                        </p>
                    </div>
                </div>
            </div>

            <!-- åŠ¨æ€å†…å®¹å±•ç¤ºåŒº (è‡ªä¸»æ¢ç´¢æ¨¡å¼) -->
            <div id="proactiveDisplay" class="border-t border-slate-200 bg-slate-50 px-4 py-3 hidden">
                <div class="flex items-center gap-2 mb-2">
                    <i data-lucide="sparkles" class="w-4 h-4 text-blue-500"></i>
                    <span class="text-xs text-blue-600 font-medium">è‡ªåŠ¨æ¢ç´¢å‘ç°</span>
                </div>
                
                <div id="insightCards" class="relative h-28 overflow-hidden">
                    <!-- æ´å¯Ÿå¡ç‰‡ä¼šåœ¨è¿™é‡ŒåŠ¨æ€æ’å…¥ -->
                </div>
            </div>

            <!-- è¾“å…¥åŒº -->
            <div class="border-t border-slate-200 p-4 bg-white">
                <div class="relative">
                    <!-- é—ªçƒæç¤ºè¯ -->
                    <div id="flickeringPrompt" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-sm pointer-events-none hidden">
                        <span class="animate-flicker">æ­£åœ¨åˆ†æå…¨çƒäººå…½å…±æ‚£ç—…æœ€æ–°è¶‹åŠ¿...</span>
                    </div>
                    
                    <div class="flex gap-2">
                        <button class="p-3 rounded-xl border border-slate-200 hover:bg-slate-50 transition flex-shrink-0">
                            <i data-lucide="plus" class="w-5 h-5 text-slate-400"></i>
                        </button>
                        
                        <div class="flex-1 relative">
                            <input 
                                id="chatInput"
                                type="text" 
                                placeholder="è¾“å…¥ä½ çš„é—®é¢˜ï¼Œæˆ–ç­‰å¾…è‡ªåŠ¨æ¢ç´¢æ´å¯Ÿ..."
                                class="w-full border border-slate-200 rounded-xl px-4 py-3 pr-12 text-sm focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition"
                            >
                            <button class="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg hover:bg-slate-100 transition">
                                <i data-lucide="mic" class="w-4 h-4 text-slate-400"></i>
                            </button>
                        </div>
                        
                        <button 
                            id="sendBtn"
                            class="p-3 rounded-xl bg-blue-600 hover:bg-blue-500 transition flex-shrink-0 shadow-md"
                        >
                            <i data-lucide="send" class="w-5 h-5 text-white"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex items-center justify-between mt-2 text-xs text-slate-400">
                    <div class="flex items-center gap-4">
                        <button class="flex items-center gap-1 hover:text-slate-600 transition">
                            <i data-lucide="paperclip" class="w-3 h-3"></i>
                            <span>é™„ä»¶</span>
                        </button>
                        <button class="flex items-center gap-1 hover:text-slate-600 transition">
                            <i data-lucide="globe" class="w-3 h-3"></i>
                            <span>è”ç½‘æœç´¢</span>
                        </button>
                    </div>
                    
                    <span>æŒ‰ Enter å‘é€ï¼ŒShift + Enter æ¢è¡Œ</span>
                </div>
            </div>
        </div>

        <!-- å³ä¾§ï¼šAI åŠ©ç†å›¢é˜Ÿé¢æ¿ -->
        <div class="w-80 glass border-l border-slate-200 flex flex-col bg-white">
            
            <!-- é¢æ¿æ ‡é¢˜ -->
            <div class="p-4 border-b border-slate-200 bg-slate-50">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold flex items-center gap-2 text-slate-700">
                        <i data-lucide="users" class="w-4 h-4 text-blue-500"></i>
                        åŒ—äº¬ç•œç‰§å…½åŒ»ç ”ç©¶æ‰€åŠ©ç†å›¢é˜Ÿ
                    </h3>
                    <span class="text-xs text-slate-500 bg-slate-200 px-2 py-1 rounded-full">4 äººåœ¨çº¿</span>
                </div>
            </div>

            <!-- åŠ©ç†åˆ—è¡¨ -->
            <div class="flex-1 overflow-y-auto p-4 space-y-3">
                
                <!-- é‡‡æ ·ä¸“å®¶Â·ä¸ä¸€ -->
                <div id="agent-ding1" class="p-3 border border-slate-200 rounded-xl cursor-pointer hover:bg-blue-50 hover:border-blue-200 transition">
                    <div class="flex items-start gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center flex-shrink-0 relative shadow-md">
                            <i data-lucide="scan" class="w-5 h-5 text-white"></i>
                            <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between">
                                <h4 class="font-medium text-sm truncate">é‡‡æ ·ä¸“å®¶Â·ä¸ä¸€</h4>
                            </div>
                            <p class="text-xs text-slate-500 mt-1">æ°”æº¶èƒ¶é‡‡æ · Â· ç¯å¢ƒåˆ†æ</p>
                            <div class="mt-2 flex items-center gap-2">
                                <span class="text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded">ç›‘æµ‹ä¸­</span>
                                <span class="text-xs text-slate-400">å…»æ®–åœºA</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ£€æµ‹åˆ†æå¸ˆÂ·ä¸äºŒ -->
                <div id="agent-ding2" class="p-3 border border-slate-200 rounded-xl cursor-pointer hover:bg-cyan-50 hover:border-cyan-200 transition">
                    <div class="flex items-start gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-400 to-cyan-600 flex items-center justify-center flex-shrink-0 relative shadow-md">
                            <i data-lucide="microscope" class="w-5 h-5 text-white"></i>
                            <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-amber-500 rounded-full border-2 border-white"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between">
                                <h4 class="font-medium text-sm truncate">æ£€æµ‹åˆ†æå¸ˆÂ·ä¸äºŒ</h4>
                            </div>
                            <p class="text-xs text-slate-500 mt-1">å¾®æµæ§æ£€æµ‹ Â· ç—…åŸåˆ†æ</p>
                            <div class="mt-2 flex items-center gap-2">
                                <span class="text-xs text-amber-600 bg-amber-50 px-2 py-0.5 rounded">åˆ†æä¸­</span>
                                <span class="text-xs text-slate-400">å± å®°åœºB</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æƒ…æŠ¥ä¸“å‘˜Â·ä¸ä¸‰ -->
                <div id="agent-ding3" class="p-3 border border-slate-200 rounded-xl cursor-pointer hover:bg-purple-50 hover:border-purple-200 transition">
                    <div class="flex items-start gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center flex-shrink-0 relative shadow-md">
                            <i data-lucide="rss" class="w-5 h-5 text-white"></i>
                            <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white animate-pulse"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between">
                                <h4 class="font-medium text-sm truncate">æƒ…æŠ¥ä¸“å‘˜Â·ä¸ä¸‰</h4>
                            </div>
                            <p class="text-xs text-slate-500 mt-1">å…¨çƒèµ„è®¯ Â· çƒ­ç‚¹è¿½è¸ª</p>
                            <div class="mt-2 flex items-center gap-2">
                                <span class="text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded">å®æ—¶è¿½è¸ª</span>
                                <span class="text-xs text-slate-400">29å›½</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç ”æŠ¥åŠ©æ‰‹Â·ä¸å›› -->
                <div class="p-3 border border-slate-200 rounded-xl cursor-pointer hover:bg-amber-50 hover:border-amber-200 transition opacity-70">
                    <div class="flex items-start gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center flex-shrink-0 shadow-md">
                            <i data-lucide="file-text" class="w-5 h-5 text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="font-medium text-sm">ç ”æŠ¥åŠ©æ‰‹Â·ä¸å››</h4>
                            <p class="text-xs text-slate-500 mt-1">è¡Œä¸šç ”æŠ¥ Â· å†³ç­–å»ºè®®</p>
                            <div class="mt-2">
                                <span class="text-xs text-slate-400">å¾…æœºä¸­</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å›¢é˜Ÿç»Ÿè®¡ -->
            <div class="p-4 border-t border-slate-200 bg-slate-50">
                <div class="grid grid-cols-3 gap-2 text-center">
                    <div class="bg-white rounded-lg p-2 border border-slate-200">
                        <p class="text-lg font-semibold text-green-600">2</p>
                        <p class="text-xs text-slate-500">ç›‘æµ‹ä¸­</p>
                    </div>
                    <div class="bg-white rounded-lg p-2 border border-slate-200">
                        <p class="text-lg font-semibold text-amber-600">1</p>
                        <p class="text-xs text-slate-500">åˆ†æä¸­</p>
                    </div>
                    <div class="bg-white rounded-lg p-2 border border-slate-200">
                        <p class="text-lg font-semibold text-slate-400">1</p>
                        <p class="text-xs text-slate-500">å¾…æœº</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– Lucide å›¾æ ‡
        lucide.createIcons();

        // è‡ªä¸»æ¢ç´¢æ¨¡å¼åˆ‡æ¢
        const proactiveToggle = document.getElementById('proactiveToggle');
        const proactiveDisplay = document.getElementById('proactiveDisplay');
        const flickeringPrompt = document.getElementById('flickeringPrompt');
        const chatInput = document.getElementById('chatInput');
        let isProactiveMode = false;
        let flickerInterval = null;
        let insightInterval = null;

        const insights = [
            { title: 'éæ´²çŒªç˜Ÿç–«è‹—çªç ´æ€§è¿›å±•', desc: 'ä¸­å›½å†œç§‘é™¢æœ€æ–°ç ”ç©¶ï¼Œä¿æŠ¤ç‡æå‡è‡³85%', type: 'research' },
            { title: 'å¸ƒé²æ°èŒç—…ç›‘æµ‹é¢„è­¦', desc: 'å†…è’™å¤3ä¸ªç›‘æµ‹ç‚¹å‘ç°ç–‘ä¼¼é˜³æ€§æ ·æœ¬', type: 'alert' },
            { title: 'å…¨çƒäººå…½å…±æ‚£ç—…è¶‹åŠ¿', desc: '2025å¹´Q1æŠ¥å‘Šï¼šæ–°å‹ç–«ç—…å¢é•¿12%', type: 'report' },
            { title: 'å†œä¸šå†œæ‘éƒ¨æ–°æ”¿ç­–', desc: 'åŠ¨ç‰©é˜²ç–«æ³•å®æ–½ç»†åˆ™æ­£å¼å®æ–½', type: 'policy' },
            { title: 'å—éä»£è¡¨å›¢è®¿é—®CAAS', desc: 'ç”Ÿç‰©å®‰å…¨ä¸å…¬å…±å«ç”Ÿåˆ›æ–°äº¤æµ', type: 'news' }
        ];

        const prompts = [
            'æ­£åœ¨åˆ†æå…¨çƒäººå…½å…±æ‚£ç—…æœ€æ–°è¶‹åŠ¿...',
            'è¿½è¸ªå†œä¸šå†œæ‘éƒ¨æœ€æ–°æ”¿ç­–åŠ¨æ€...',
            'ç›‘æµ‹å…»æ®–åœºAå®æ—¶æ•°æ®å˜åŒ–...',
            'æŸ¥è¯¢å›½å®¶åŸºå› åº“æœ€æ–°ç ”ç©¶è¿›å±•...',
            'ç”Ÿæˆ2025å¹´Q1è¡Œä¸šç ”æŠ¥...'
        ];

        proactiveToggle.addEventListener('click', () => {
            isProactiveMode = !isProactiveMode;
            
            if (isProactiveMode) {
                proactiveToggle.classList.add('bg-blue-500', 'text-white', 'border-blue-600');
                proactiveToggle.classList.remove('bg-blue-50', 'text-blue-600', 'border-blue-200');
                proactiveDisplay.classList.remove('hidden');
                flickeringPrompt.classList.remove('hidden');
                chatInput.placeholder = '';
                
                startFlickering();
                startInsightRotation();
            } else {
                proactiveToggle.classList.remove('bg-blue-500', 'text-white', 'border-blue-600');
                proactiveToggle.classList.add('bg-blue-50', 'text-blue-600', 'border-blue-200');
                proactiveDisplay.classList.add('hidden');
                flickeringPrompt.classList.add('hidden');
                chatInput.placeholder = 'è¾“å…¥ä½ çš„é—®é¢˜ï¼Œæˆ–ç­‰å¾…è‡ªåŠ¨æ¢ç´¢æ´å¯Ÿ...';
                
                stopFlickering();
                stopInsightRotation();
            }
        });

        function startFlickering() {
            let index = 0;
            flickerInterval = setInterval(() => {
                index = (index + 1) % prompts.length;
                flickeringPrompt.innerHTML = `\n                    \u003cspan class="animate-typewriter"\u003e${prompts[index]}\u003c/span\u003e\n                `;
            }, 30000);
        }

        function stopFlickering() {
            if (flickerInterval) {
                clearInterval(flickerInterval);
                flickerInterval = null;
            }
        }

        function startInsightRotation() {
            const container = document.getElementById('insightCards');
            let index = 0;
            
            showInsight(insights[0]);
            
            insightInterval = setInterval(() => {
                index = (index + 1) % insights.length;
                showInsight(insights[index]);
            }, 30000);
        }

        function stopInsightRotation() {
            if (insightInterval) {
                clearInterval(insightInterval);
                insightInterval = null;
            }
        }

        function showInsight(insight) {
            const container = document.getElementById('insightCards');
            const typeColors = {
                research: 'text-blue-600',
                alert: 'text-red-600',
                report: 'text-purple-600',
                policy: 'text-amber-600',
                news: 'text-cyan-600'
            };
            
            const typeLabels = {
                research: 'ç ”ç©¶',
                alert: 'é¢„è­¦',
                report: 'ç ”æŠ¥',
                policy: 'æ”¿ç­–',
                news: 'èµ„è®¯'
            };
            
            const card = document.createElement('div');
            card.className = 'absolute inset-0 animate-slide-in';
            card.innerHTML = `\n                \u003cdiv class="bg-white rounded-xl p-3 h-full border border-slate-200 shadow-sm flex flex-col justify-center"\u003e\n                    \u003cdiv class="flex items-center gap-2 mb-1"\u003e\n                        \u003cspan class="text-xs ${typeColors[insight.type]} bg-slate-50 px-2 py-0.5 rounded"\u003e${typeLabels[insight.type]}\u003c/span\u003e\n                        \u003ch4 class="font-medium text-sm ${typeColors[insight.type]}"\u003e${insight.title}\u003c/h4\u003e\n                    \u003c/div\u003e\n                    \u003cp class="text-xs text-slate-600"\u003e${insight.desc}\u003c/p\u003e\n                    \u003cdiv class="mt-2 flex items-center gap-2"\u003e\n                        \u003cbutton class="text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1"\u003e\n                            æŸ¥çœ‹è¯¦æƒ… \u003ci data-lucide="arrow-right" class="w-3 h-3"\u003e\u003c/i\u003e\n                        \u003c/button\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            `;
            
            const oldCards = container.querySelectorAll('.animate-slide-in');
            oldCards.forEach((old, i) => {
                if (i === oldCards.length - 1) {
                    old.remove();
                }
            });
            
            container.appendChild(card);
            lucide.createIcons();
            
            highlightAgent(insight.type);
        }

        function highlightAgent(type) {
            document.querySelectorAll('[id^="agent-ding"]').forEach(card => {
                card.classList.remove('agent-active');
            });
            
            const agentMap = {
                research: 'agent-ding2',
                alert: 'agent-ding1',
                report: 'agent-ding4',
                policy: 'agent-ding3',
                news: 'agent-ding3'
            };
            
            const agentId = agentMap[type];
            if (agentId) {
                const agent = document.getElementById(agentId);
                if (agent) {
                    agent.classList.add('agent-active');
                    setTimeout(() => agent.classList.remove('agent-active'), 5000);
                }
            }
        }

        // å‘é€æ¶ˆæ¯
        const sendBtn = document.getElementById('sendBtn');
        const chatContainer = document.getElementById('chatContainer');

        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;
            
            const userMsg = document.createElement('div');
            userMsg.className = 'flex gap-3 justify-end animate-slide-in';
            userMsg.innerHTML = `\n                \u003cdiv class="chat-bubble user rounded-2xl rounded-br-sm px-4 py-3 max-w-lg"\u003e\n                    \u003cp class="text-sm"\u003e${text}\u003c/p\u003e\n                \u003c/div\u003e\n            `;
            chatContainer.appendChild(userMsg);
            chatInput.value = '';
            
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'flex gap-3 animate-slide-in';
                aiMsg.innerHTML = `\n                    \u003cdiv class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center flex-shrink-0"\u003e\n                        \u003ci data-lucide="shield-check" class="w-5 h-5 text-white"\u003e\u003c/i\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class="chat-bubble assistant rounded-2xl rounded-bl-sm px-4 py-3"\u003e\n                        \u003cp class="text-sm"\u003eå·²æ”¶åˆ°æ‚¨çš„è¯¢é—®ï¼Œ\u003cspan class="text-blue-600 font-medium"\u003e@é‡‡æ ·ä¸“å®¶Â·ä¸ä¸€\u003c/span> å’Œ \u003cspan class="text-cyan-600 font-medium"\u003e@æ£€æµ‹åˆ†æå¸ˆÂ·ä¸äºŒ\u003c/span> æ­£åœ¨ååŒåˆ†æä¸­...\u003c/p\u003e\n                        \u003cdiv class="mt-2 flex items-center gap-2"\u003e\n                            \u003cspan class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"\u003e\u003c/span\u003e\n                            \u003cspan class="text-xs text-slate-500"\u003eé¢„è®¡ 30 ç§’å†…å®Œæˆåˆ†æ\u003c/span\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                `;
                chatContainer.appendChild(aiMsg);
                lucide.createIcons();
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 1000);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
    </script>
</body>
</html>
